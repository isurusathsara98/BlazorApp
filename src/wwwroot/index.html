<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BeautyWeb</title>
    <base href="/" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="BeautyWeb.styles.css" rel="stylesheet" />
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>
    <script src="_framework/blazor.webassembly.js"></script>
</body>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
    import {
        getFirestore,
        collection,
        addDoc,
        getDocs,
        deleteDoc,
        doc,
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyBUEuspgq4Ka2c9abqbP7NVNOU0Dhh_FjI",
        authDomain: "todo-blazor.firebaseapp.com",
        projectId: "todo-blazor",
        storageBucket: "todo-blazor.appspot.com",
        messagingSenderId: "482147020387",
        appId: "1:482147020387:web:9039bfc789a7981d6d5256",
        measurementId: "G-XCL4RK7TE3"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);

    // Initialize Cloud Firestore and get a reference to the service
    const db = getFirestore(app);

    // Define a function to add a new user to the Firestore database
    window.getNotes = async () => {
        const querySnapshot = await getDocs(collection(db, "notes"));
        let dataArray = querySnapshot.docs.map((doc) => ({
            id: doc.id,
            description: doc.get("description"),
        }));

        return dataArray;
    };

    window.getInventory = async () => {
        const querySnapshot = await getDocs(collection(db, "inventory"));
        let dataArray = querySnapshot.docs.map((doc) => ({
            id: doc.id,
            brand: doc.get("brand"),
            discount: doc.get("discount"),
            quantity: doc.get("quantity"),
            price: doc.get("price"),
            productName: doc.get("product"),
            type: doc.get("type"),
        }));

        return dataArray;
    };
</script>
</html>
